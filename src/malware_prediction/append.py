base_path = "/Users/ramin/Developer/Python/SusML/data/results"
PIs = ["pi01", "pi02", "pi03",
       "pi04", "pi05", "pi06",
       "pi07", "pi08", "pi09",
       "pi10", "pi11", "pi12"]

LOSS_FUNCTIONS = ["bceloss", "mseloss"]

OPTIMIZERS = ["adagrad", "adam", "adamw", "asgd", "sgd"]


def append_run_times():
    cpu_paths = []
    f = open(f"/Users/ramin/Developer/Python/SusML/data/results/run_time/run_time.csv", "w")
    for optimizer in OPTIMIZERS:
        for loss_function in LOSS_FUNCTIONS:
            for pi in PIs:
                cpu_paths.append(f"{base_path}/{pi}/run_time_model_{optimizer}_{loss_function}_743456.csv")
            for cpu_path in cpu_paths:
                run_time_file = open(cpu_path)
                f.write(run_time_file.read().strip() + f", {optimizer}, {loss_function}\n")
                run_time_file.close()
            cpu_paths.clear()
    f.close()


def append(metric, category, row_number):
    paths = []

    for optimizer in OPTIMIZERS:
        for loss_function in LOSS_FUNCTIONS:
            f = open(
                f"/Users/ramin/Developer/Python/SusML/data/results/{metric}/{metric}_{category}_{optimizer}_{loss_function}.csv",
                "w")
            for pi in PIs:
                paths.append(f"{base_path}/{pi}/{metric}_{category}_{optimizer}_{loss_function}_{row_number}.csv")
            for p in paths:
                cpu_file = open(p)
                f.write(cpu_file.read())
                cpu_file.close()
            paths.clear()
            f.close()

def append_submissions():
    submission_paths = []
    for optimizer in OPTIMIZERS:
        for loss_function in LOSS_FUNCTIONS:
            f = open(
                f"/Users/ramin/Developer/Python/SusML/data/results/submission/submission_{optimizer}_{loss_function}.csv",
                "w")
            for pi in PIs:
                submission_paths.append(f"{base_path}/{pi}/submission/submission_{optimizer}_{loss_function}.csv")
            for submission_path in submission_paths:
                run_time_file = open(submission_path)
                f.write(run_time_file.read())
                run_time_file.close()
            submission_paths.clear()
            f.close()


if __name__ == "__main__":
    append_run_times()
    append("cpu_usage", "model", "743456")
    append("memory_usage", "model", "743456")
    append_submissions()
